---
title: 软件设计师笔记
date: 2022-08-31
sidebar: 'auto'
tags:
 - study
categories: 
-  软件设计师笔记
---

# 计算机体系结构分类 
## 数据的展示

R进制转十进制采用按权展开法，其具体操作方式为: 将R进制数的每一位数值用R的k次方的形式表示。当该数字出现在小数点左侧，k是该位与小数点之间数码的个数，出现在右侧，k是负数，其绝对值是该位和小数点之间数码的个数加1


 例如二进制 10100.01 = 1 * 2<sup>5</sup> + 1 * 2<sup>2</sup> + 1 * 2<sup>-2</sup>
 例如七进制 604.01 = 6 * 7<sup>2</sup> + 4 * 7<sup>0</sup> + 1 * 7<sup>-2</sup>

### 十进制转R进制 
使用短除法 

例如94转二进制
94 / 2 = 47 余数 0
47 / 2 = 23 余数 1 
23 / 2 = 11 余数 1 
11 / 2 = 5 余数 1 
5 / 2 = 2 余数 1 
2 / 2 = 1 余数 0

结果就是 1011110 

### 二进制转八进制 以及 十六进制

#### 二进制转八进制

每三位对应一个八进制位 不够补0

例如： 10001110 转 八进制

10 -> 010 -> 1 * 2<sup>1</sup> 

001 -> 1 * 2<sup>0</sup>

110  -> 1 * 2<sup>2</sup> + 1 * 2<sup>1</sup>

结果就是 216

#### 二进制转十六进制

每四位对应一个八进制位 不够补0 超过10的数 用字母 A -> 10 B -> 11 以此类推作表示


## 原码 反码 补码 移码

### 原码
原码就是一个数的二进制表达。其中对于有符号数，其最高位为符号位，正数为0，负数为1。例如short a = 6; a 的原码就是0000 0000 0000 0110；更改 a 的值a = -18; 此时 a 的原码就是1000 0000 0001 0010。

通俗的理解，原码就是一个整数本来的二进制形式。

### 反码
对于正数，它的反码就是其原码（原码和反码相同）；负数的反码是将原码中除符号位以外的所有位（数值位）取反，也就是 0 变成 1，1 变成 0。例如short a = 6; a 的原码和反码都是0000 0000 0000 0110；更改 a 的值a = -18; 此时 a 的反码是1111 1111 1110 1101。

### 补码
对于正数，它的补码就是其原码（原码、反码、补码都相同）；负数的补码是其反码加 1。例如short a = 6; a 的原码、反码、补码都是0000 0000 0000 0110；更改 a 的值a = -18; 此时 a 的补码是1111 1111 1110 1110。

在计算机内存中，整数一律采用补码的形式来存储。这意味着，当读取整数时还要采用逆向的转换，也就是将补码转换为原码。将补码转换为原码也很简单：先减去 1，再将数值位取反即可。

### 移码
移码最简单了，不管正负数，只要将其补码的符号位取反即可。

### 取值范围
8位二进制原码的表示范围：-127～+127

8位二进制反码的表示范围：-127～+127

8位二进制补码的表示范围：-128～+127

n位二进制的表示范围:

原码：-[2^(n-1)-1] ~ 2^(n-1) - 1

反码：-[2^(n-1)-1] ~ 2^(n-1) - 1

补码：-2^(n-1) ~ 2^(n-1) - 1

## 浮点数运算

### 对阶
往高阶对齐
例如 1000 = 1.0 * 10<sup>3</sup>， 119 = 1.19 * 10<sup>2</sup> ，把119改成  0.119 * 10<sup>3</sup>

### 结果格式化
最高位不能是0
最高位只能是1位
例如 0.1119 * 10<sup>3</sup>要改成 1.119 * 10<sup>2</sup>
例如 11.19 * 10<sup>1</sup> 要改成 1.119 * 10<sup>2</sup>

## CPU 结构

CPU 分为运算器 跟 控制器

### 运算器
#### 算术逻辑单元ALU
运算器也称为算术逻辑单元ALU（Arithmetic Logic Unit）。它的功能是完成算术运算和逻辑运算。算术运算是指加、减、乘、除及它们的复合运算。而逻辑运算是指“与”、“或”、“非”等逻辑比较和逻辑判断等操作。在计算机中，任何复杂运算都转化为基本的算术与逻辑运算，然后在运算器中完成

#### 累加寄存器AC
累加寄存器AC通常简称为累加器，它是一个通用寄存器。其功能是：当运算器的算术逻辑单元(ALU)执行算术或逻辑运算时，为ALU提供一个工作区。累加寄存器暂时存放ALU运算的结果信息。显然，运算器中至少要有一个累加寄存器。在运算器中，累加器是专门存放算术或逻辑运算的一个操作数和运算结果的寄存器。能进行加、减、读出、移位、循环移位和求补等操作。是运算器的主要部分。

#### 数据缓冲寄存器（Data Register,DR）
用来暂时存放由内存储器读出的一条指令或一个数据字；反之，当向内存存入一条指令或一个数据字时，也暂时将它们存放在数据缓冲寄存器中。

#### 状态条件寄存器（PSW，Program Status Word）
保存由算术指令和逻辑指令运行或测试的结果建立的各种条件码内容，如运算结果进位标志（C），运算结果溢出标志（V），运算结果为零标志（Z），运算结果为负标志（N），中断标志（I），方向标志（D）和单步标识等。这些标志位通常分别由1位触发器保存，保存了当前指令完成之后的状态，通常，一个算术操作产生一个运算结果，而一个逻辑操作则产生一个判决。

### 控制器
#### 程序计数器PC
当执行一条指令时，首先需要根据PC中存放的指令地址，将指令由内存取到指令寄存器中，此过程称为“取指令”。与此同时，PC中的地址或自动加1或由转移指针给出下一条指令的地址。此后经过分析指令，执行指令。完成第一条指令的执行，而后根据PC取出第二条指令的地址，如此循环，执行每一条指令。

#### 指令寄存器（IR，Instruction Register）
指令寄存器（IR，Instruction Register），用于暂存当前正在执行的指令。指令寄存器的时钟信号是clk，在clk的上升沿触发。指令寄存器将数据总线送来的指令存入16位的寄存器中，但并不是每次数据总线上的数据都需要寄存，因为数据总线上有时传输指令，有时传输数据。由CPU状态控制器的 Ir_ena 信号控制数据是否需要寄存。复位时，指令寄存器被清零 。

#### 指令译码器
指令译码器(Instruction Decoder,ID)是控制器中的主要部件之一。计算机能且只能执行“指令”。指令由操作码和地址码组成。操作码表示要执行的操作性质，即执行什么操作，或做什么；地址码是操作码执行时的操作对象的地址。计算机执行一条指定的指令时，必须首先分析这条指令的操作码是什么，以决定操作的性质和方法，然后才能控制计算机其他各部件协同完成指令表达的功能。这个分析工作由指令译码器来完成。指令执行通过控制部件进行指令译码，标量指令由标量处理机执行向量指令各Cache控制器监听总线所有操作，并对操作做相应处理（修改或作废），如MESI协议。

#### 时序部件
时序部件主要由主时钟源、节拍发生器和启停控制逻辑组成。其中的关键部件是节拍发生器。节拍发生器可以是一个环形计数器，也可以是一个计数译码电路。时钟电路包括一个晶体控制的振荡电路。晶体振荡器产生一个连续的正弦输出，正弦波转换为数字电路所需的方波。方波提供快速上升和下降的边界以触发事件。时钟频率越快，数据处理越快，处理频率来源于时钟频率。时钟是产生周期信号的基本方法，这些周期信号用于实现包括计算机在内的电子设备的同步。


## Flynn

|  体系结构类型   | 结构  | 关键特性 | 代表 |
|  ----  | ----  |  ----  | ----  |
| 单指令流单数据流SISD  | 控制部分：一个</br>处理器：一个</br>主存模式： 一个 |   | 单处理器系统 |
| 单指令流多数据流SIMD  | 控制部分：一个</br> 处理器：多个</br> 主存模式： 多个 | 各处理器以异步的形式</br>执行同一条指令  | 并行处理机</br> 阵列处理机</br> 超级向量处理机 |
| 多指令流单数据流MISD  | 控制部分：多个</br> 处理器：一个</br> 主存模式： 多个 | 被证明不可能，至少是不实际  | 目前没有,有文献称流水线计算机为此类 |
| 多指令流多数据流MIMD  | 控制部分：多个</br> 处理器：多个</br> 主存模式： 多个 | 能够实现作业任务、指令等</br>各级全面并行  | 多处理机系统 </br>多计算机 |

## CISC 与 RISC
|指令系统类型|指令|寻址方式|实现方式|其他|
| ----| ---- | ---- | ---- | --- |
|CISC（复杂）|数量多，使用频率差别大，可变长格式|支持多种|微程序控制技术（微码）|研制周期长|
|RISC（精简）|数量少，使用频率接近，定长格式，大部分为单周期指令，操作寄存器，只有Load/Store操作内存|支持方式少|增加了通用寄存器；硬部线逻辑控制为主，适合采用流水线|优化编译，有效支持高级语言|


## 流水线
### 概念
流水线是指在程序执行时多条指令重叠进行操作的一种准并行处理实现技术。各种部件同时处理是针对不同指令而言的，它们可同时为多条指令的不同部分进行工作，以提高各部件的利用率和指令的平均执行速度。

### 周期
流水线周期为执行时间最长的一段 </br>
流水线计算公式： </br>
1条指令执行时间 + （指令条数 - 1） * 流水线周期 </br>
1.1 理论公式： （t1+t2+..+tk） + (n-1)* t </br>
1.2 实践公式：（k + n - 1）* t </br>
注：tn -> 每段的执行时间 n -> 多少条指令 t-> 流水线周期 k-> 一个周期多少段 </br>

### 吞吐率
流水线的吞吐率是指在单位时间内流水线所完成的任务数量或输入的结果数量。 </br>
计算流水线吞吐率的最基本的公式如下: </br>
tp = 指令条数 / 流水线执行时间 </br>
流水线 最大吞吐率：1 / t  t-> 流水线周期 </br>

### 流水线的加速比
完成同样一批任务，不使用流水线所用的时间与使用流水线所用的时间之比 </br>
基本公式如下： </br>
S = 不适用流水线的执行时间 / 使用流水线的执行时间 </br>
